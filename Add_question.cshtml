@using DotNetNuke.Common;
@using System;
@using DotNetNuke.Entities.Modules;
@using System.Data.SqlClient;
@using System.Diagnostics;
@using System.Data;
@using System.Data.Common;

@*Copyright (c) 2017 by Anubis *@

<body>
  <form method="post">
    <fieldset>
      <h2>Add A New Question</h2>
      <div>
        <label for="Question">Question Text: <span style="color:red">*</span></label>
        <br>The main text of the question.</br>

        <input type="text" name="Question" value="" size="100%" maxlenght="255" required />
        <br></br>
      </div>
      <div>
        <label for="Question">Question Help Title:</label>
        <br>The title of the educational popup.</br>
        <input type="text" name="Question_help_title" value="" size="100%" maxlenght="255"/>
        <br></br>
      </div>
 	    <div>
        <label for="Question">Question Help Text:</label>
        <br>The body of the educational popup.</br>
        <input type="text" name="Question_help_text" value="" size="100%" maxlenght="255"/>
        <br></br>
      </div>
      <div>
        <label for="Question_type">Question Type: <span style="color:red">*</span></label>
        <br></br>
        <input type="radio" name="Question_type" value="radio" required/>radio
        <input type="radio" name="Question_type" value="checkbox" required/>checkbox
        <br></br>
      </div>
      <div>
        <label for="Question_type">Question Required: <span style="color:red">*</span></label>
        <br></br>
        <input type="radio" name="Question_required" value="required" required/>true
        <input type="radio" name="Question_required" value="" required/>false
        <br></br>
      </div>
      <div>
        <label for="Question_option_1">Question option 1: <span style="color:red">*</span></label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_1" Value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_1_readiness">Readiness Value <span style="color:red">*</span></label>
        <select name="Question_option_1_readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
      </div>
      <div>
        <label for="Question_option_2">Question option 2:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_2" Value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_2_readiness">Readiness Value</label>
        <select name="Question_option_2_readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
      </div>
      <div>
        <label for="Question_option_3">Question option 3:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_3" value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_3_readiness">Readiness Value</label>
        <select name="Question_option_3_readiness">
          <option value="0">Neutral</option>
          <option value="5">Perfect</option>
          <option value="4">Great</option>
          <option value="2">Good</option>
          <option value="1">Okay</option>
          <option value="-2">Flag</option>
          <option value="-3">Yellow Flag</option>
          <option value="-5">Red Flag</option>
          <option value="-1000">Restrict</option>
        </select>
        <br></br>
      </div>
      <div>
        <label for="Question_option_4">Question option 4:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_4" value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_4_readiness">Readiness Value</label>
        <select name="Question_option_4_readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
      </div>
      <div>
        <label for="Question_option_5">Question option 5:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_5" value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_5_readiness">Readiness Value</label>
        <select name="Question_option_5_readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
      </div>
      <div>
        <label for="Question_option_6">Question option 6:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_6" value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_6_readiness">Readiness Value</label>
        <select name="Question_option_6_readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
	  </div>
      <div>
        <label for="Question_option_6">Question option 7:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_7" value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_7_readiness">Readiness Value</label>
        <select name="Question_option_7_readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
	  </div>
      <div>
        <label for="Question_option_6">Question option 8:</label>
        <br>A possible answer for the question.</br>
        <input type="text" name="Question_option_8" value="" size="100%" maxlenght="255"/>
        <br></br>
        <label for="Question_option_8_readiness">Readiness Value</label>
        <select name="Question_option_8readiness">
        <option value="0">Neutral</option>
        <option value="5">Perfect</option>
        <option value="4">Great</option>
        <option value="2">Good</option>
        <option value="1">Okay</option>
        <option value="-2">Flag</option>
        <option value="-3">Yellow Flag</option>
        <option value="-5">Red Flag</option>
        <option value="-1000">Restrict</option>
        </select>
        <br></br>
	  </div>
    <input type="submit" class="btn btn-success btn-lg" name="Insert" value="Add Question"/>
    </feldset>
  </form>



@{

  string Question = "";
  string Question_help_text = "";
  string Question_help_title = "";
  string Question_type = "";
  string Question_required = "";
  string Question_option_1 = "";
  string Question_option_2 = "";
  string Question_option_3 = "";
  string Question_option_4 = "";
  string Question_option_5 = "";
  string Question_option_6 = "";
  string Question_option_7 = "";
  string Question_option_8 = "";
  int Question_option_1_readiness = 0;
  int Question_option_2_readiness = 0;
  int Question_option_3_readiness = 0;
  int Question_option_4_readiness = 0;
  int Question_option_5_readiness = 0;
  int Question_option_6_readiness = 0;
  int Question_option_7_readiness = 0;
  int Question_option_8_readiness = 0;

  if(IsPost){

    Question = Request.Form["Question"];
    Question_help_text = Request.Form["Question_help_text"];
    Question_help_title = Request.Form["Question_help_title"];
    Question_type =  Request.Form["Question_type"];
    Question_required = Request.Form["Question_required"];
    Question_option_1 = Request.Form["Question_option_1"];
    Question_option_2 = Request.Form["Question_option_2"];
    Question_option_3 = Request.Form["Question_option_3"];
    Question_option_4 = Request.Form["Question_option_4"];
    Question_option_5 = Request.Form["Question_option_5"];
    Question_option_6 = Request.Form["Question_option_6"];
    Question_option_7 = Request.Form["Question_option_7"];
    Question_option_8 = Request.Form["Question_option_8"];
    Question_option_1_readiness = Convert.ToInt32(Request.Form["Question_option_1_readiness"]);
    Question_option_2_readiness = Convert.ToInt32(Request.Form["Question_option_2_readiness"]);
    Question_option_3_readiness = Convert.ToInt32(Request.Form["Question_option_3_readiness"]);
    Question_option_4_readiness = Convert.ToInt32(Request.Form["Question_option_4_readiness"]);
    Question_option_5_readiness = Convert.ToInt32(Request.Form["Question_option_5_readiness"]);
    Question_option_6_readiness = Convert.ToInt32(Request.Form["Question_option_6_readiness"]);
    Question_option_7_readiness = Convert.ToInt32(Request.Form["Question_option_7_readiness"]);
    Question_option_8_readiness = Convert.ToInt32(Request.Form["Question_option_8_readiness"]);

    <h3>You just added</h3>
    <p>
      Question Text: @Question <br></br>
      Question type: @Question_type <br></br>
      Question required: @Question_required <br></br>
      Question help title: @Question_help_title <br></br>
      Question help text: @Question_help_text <br></br>
      Answer Option: @Question_option_1 <br></br>
      Answer Option: @Question_option_2 <br></br>
      Answer Option: @Question_option_3 <br></br>
      Answer Option: @Question_option_4 <br></br>
      Answer Option: @Question_option_5 <br></br>
      Answer Option: @Question_option_6 <br></br>
      Answer Option: @Question_option_7 <br></br>
      Answer Option: @Question_option_8 <br></br>
    </p>


    try
    {

      var ConnectionString = DotNetNuke.Common.Utilities.Config.GetConnectionString();
      SqlConnection database = new SqlConnection(ConnectionString);
      var databaseName = database.Database;
      SqlCommand cmd = new SqlCommand();
      SqlDataReader reader;

      cmd.Parameters.Add(new SqlParameter("@1", string.IsNullOrEmpty(Question) ? (object)DBNull.Value : Question));
      cmd.Parameters.Add(new SqlParameter("@2", string.IsNullOrEmpty(Question_type) ? (object)DBNull.Value : Question_type));
      cmd.Parameters.Add(new SqlParameter("@3", string.IsNullOrEmpty(Question_required) ? (object)DBNull.Value : Question_required));
      cmd.Parameters.Add(new SqlParameter("@4", string.IsNullOrEmpty(Question_help_title) ? (object)DBNull.Value : Question_help_title));
      cmd.Parameters.Add(new SqlParameter("@5", string.IsNullOrEmpty(Question_help_text) ? (object)DBNull.Value : Question_help_text));
      cmd.Parameters.Add(new SqlParameter("@6", string.IsNullOrEmpty(Question_option_1) ? (object)DBNull.Value : Question_option_1));
      cmd.Parameters.Add(new SqlParameter("@7", string.IsNullOrEmpty(Question_option_2) ? (object)DBNull.Value : Question_option_2));
      cmd.Parameters.Add(new SqlParameter("@8", string.IsNullOrEmpty(Question_option_3) ? (object)DBNull.Value : Question_option_3));
      cmd.Parameters.Add(new SqlParameter("@9", string.IsNullOrEmpty(Question_option_4) ? (object)DBNull.Value : Question_option_4));
      cmd.Parameters.Add(new SqlParameter("@10", string.IsNullOrEmpty(Question_option_5) ? (object)DBNull.Value : Question_option_5));
      cmd.Parameters.Add(new SqlParameter("@11", string.IsNullOrEmpty(Question_option_6) ? (object)DBNull.Value : Question_option_6));
      cmd.Parameters.Add(new SqlParameter("@12", string.IsNullOrEmpty(Question_option_7) ? (object)DBNull.Value : Question_option_7));
      cmd.Parameters.Add(new SqlParameter("@13", string.IsNullOrEmpty(Question_option_8) ? (object)DBNull.Value : Question_option_8));
      cmd.Parameters.AddWithValue("@14", Question_option_1_readiness);
      cmd.Parameters.AddWithValue("@15", Question_option_2_readiness);
      cmd.Parameters.AddWithValue("@16", Question_option_3_readiness);
      cmd.Parameters.AddWithValue("@17", Question_option_4_readiness);
      cmd.Parameters.AddWithValue("@18", Question_option_5_readiness);
      cmd.Parameters.AddWithValue("@19", Question_option_6_readiness);
      cmd.Parameters.AddWithValue("@20", Question_option_7_readiness);
      cmd.Parameters.AddWithValue("@21", Question_option_8_readiness);

      cmd.CommandText = "INSERT INTO Questions (Question, Question_type, Question_required, Question_help_title, Question_help_text, Question_option_1, Question_option_2, Question_option_3, Question_option_4, Question_option_5, Question_option_6, Question_option_7, Question_option_8, Question_option_1_readiness, Question_option_2_readiness, Question_option_3_readiness, Question_option_4_readiness, Question_option_5_readiness, Question_option_6_readiness, Question_option_7_readiness, Question_option_8_readiness) VALUES (@1, @2, @3, @4, @5, @6, @7, @8, @9, @10, @11, @12, @13, @14, @15, @16, @17, @18, @19, @20, @21)";


      cmd.CommandType = CommandType.Text;


      cmd.Connection = database;

      database.Open();

      reader = cmd.ExecuteReader();

      database.Close();

    }
    finally
    {

    }

  }
}


</body>
